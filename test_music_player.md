# 音乐播放器功能测试说明

## 功能测试清单

1. **播放器默认状态**：
   - 播放器应默认吸附在左下角
   - 显示为一个小的音乐图标
   - 图标颜色应跟随全局主题变化

2. **音乐节奏变化效果**：
   - 播放音乐时，图标颜色应随节奏变化
   - 音乐可视化效果应显示在图标旁边

3. **播放列表功能**：
   - 点击播放列表按钮应显示音乐列表
   - 列表应包含music目录下的所有音乐文件
   - 可以点击列表中的曲目进行切换播放

4. **播放控制**：
   - 播放/暂停按钮应正常工作
   - 上一首/下一首按钮应正常工作
   - 进度条应可拖动
   - 音量控制应可调节

5. **循环播放**：
   - 音乐播放完毕后应自动循环播放

6. **收起/展开状态**：
   - 悬停时应展开显示控制按钮
   - 无操作时应保持收起状态

7. **拖动和吸附**：
   - 点击拖动句柄可拖动播放器
   - 松开后应吸附到最近的窗口边缘

8. **主题适配**：
   - 播放器颜色应跟随全局主题变化

## 音乐文件准备

如果要在music目录下添加更多音乐文件，需要：

1. 将音乐文件放入 `public/music/` 目录
2. 更新 `public/music/music-list.json` 文件，添加新音乐文件名
3. 重启应用以使更改生效

示例 music-list.json:
```json
[
  "风止了.mp3",
  "sample1.mp3",
  "sample2.wav"
]
```

## 技术实现说明

1. **音乐文件加载**：通过 `/music/music-list.json` 文件获取音乐列表
2. **节奏颜色变化**：根据音频数据的幅度动态调整图标颜色
3. **吸附效果**：使用窗口尺寸计算最近边缘并自动定位
4. **主题适配**：使用 `useTheme` hook 获取当前主题配置
5. **循环播放**：使用 HTML5 Audio 的 `loop` 属性和 `onEnded` 事件